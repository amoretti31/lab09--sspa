name: Spellcheck LaTeX Files

on:
    push:
        branches: [master]
    pull_request:        
        branches: [master]

jobs:
    spellcheck:
        runs-on: ubuntu-latest

        steps:
          - name: Checkout repository
            uses: actions/checkout@v3
    
          - name: Install aspell
            run: sudo apt-get update && sudo apt-get install -y aspell aspell-en
    
          - name: Find and spellcheck .tex files
            run: |
                for file in $(find . -name "*.tex"); do
                echo "Checking spelling in $file"
                misspelled=$(aspell --mode=tex list < "$file" | sort -u)
                if [ -n "$misspelled" ]; then
                    echo "Misspelled words in $file:"
                    echo "$misspelled"
                    exit 1
                fi
                done

              